{% extends "base.html" %}

{% block title %}Dashboard - Job Tracker{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2>Your Job Applications</h2>
        <a href="{{ url_for('add_job') }}" class="btn">Add New Job</a>
    </div>
    
    <!-- Statistics -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ stats.total }}</div>
            <div class="stat-label">Total Applications</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.pending }}</div>
            <div class="stat-label">Pending</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.interviews }}</div>
            <div class="stat-label">Interviews</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.offers }}</div>
            <div class="stat-label">Offers</div>
        </div>
    </div>
    
    <!-- Job Applications List -->
    {% if job_applications %}
        <div class="job-list">
            {% for job in job_applications %}
            <div class="job-item {% if not loop.last %} job-divider {% endif %}">
                <div class="job-header">
                    <h3>{{ job.title }}</h3>
                    <span class="badge badge-{{ job.status }}">{{ job.status }}</span>
                </div>
                <div class="job-details">
                    <div class="company">{{ job.company }}</div>
                    <div>Applied: {{ job.application_date.strftime('%B %d, %Y') }}</div>
                    {% if job.job_url %}
                        <div>URL: <a href="{{ job.job_url }}" target="_blank" class="link">{{ job.job_url }}</a></div>
                    {% endif %}
                    {% if job.notes %}
                        <div>Notes: {{ job.notes }}</div>
                    {% endif %}
                    <div class="job-actions">
                        <a href="{{ url_for('edit_job', job_id=job.id) }}" class="btn btn-secondary btn-small">Edit</a>
                        <form method="POST" action="{{ url_for('delete_job', job_id=job.id) }}" 
                              class="inline-form"
                              onsubmit="return confirm('Are you sure you want to delete this job application?')">
                            <button type="submit" class="btn btn-danger btn-small">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <h3>No job applications yet</h3>
            <p>Click "Add New Job" to get started tracking your applications!</p>
        </div>
    {% endif %}
</div>
{% endblock %}
